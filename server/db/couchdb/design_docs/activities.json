{
  "_id": "_design/activities",
  "language": "coffeescript",
  "views": {
    "byUsernameAndDate": {
      "map": "(doc)-> emit [ doc.actor.username, doc.updated ], null",
      "reduce": "_count"
    },
    "followActivitiesByObject": {
      "map": "(doc)->\n  if doc.type is 'Follow'\n    emit Object.values(doc.object)[0], null"
    },
    "byExternalId": {
      "map": "(doc)-> if doc.externalId then emit doc.externalId, null"
    }
  }
}
